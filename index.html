<html>

<head>
		<script src="data.js"></script>
		
</head>


<body>
	<p id="header">Tach!</p>
	
	<div id="parentDiv">
	
	
	</div>
	
	
	
	
	<script>
		function init() {
			var testList = create_combobox("testList", getEffects(), function(selectedValue) {
				console.log(selectedValue);
			});
			
			document.getElementById("parentDiv").appendChild(testList);
		}	
		
		
		// creates a select box with prefilled values
		function create_combobox(id, valueList, callback) {
			
			// create select box, assign ID and register callback
			var _selectBox = document.createElement("select"); 
			_selectBox.id = id;
			_selectBox.onchange = function() { 
				callback(_selectBox.options[_selectBox.selectedIndex].value); 
			}
			
			// add options from given list to the select box
			for(var i = 0; i < valueList.length; i++) {
				var _value = valueList[i];
				var _option = document.createElement("option");
				_option.textContent = _value;
			    _option.value = _value;
				_selectBox.appendChild(_option);
			}
			
			return _selectBox;
		}
		
		
		function getIngredients() {
			var listOfIngredients = []
			for( var i = 0; i < raw_data.length; i++) {
				listOfIngredients.push(raw_data[i][0]);				
			}
			return listOfIngredients;
		}
		
		function getEffects() {
			var listOfEffects = []
			for( var i = 0; i < raw_data.length; i++) {
				for( var x = 1; x < 5; x++) {
					listOfEffects.push(raw_data[i][x]);
				}		
			}
			
			return unique(listOfEffects);
		}
		
		function unique(a) {
			return a.sort().filter(function(value, index, array) {
				return (index === 0) || (value !== array[index-1]);
			});
		}
		
		
		init();
		
	</script>
	
</body>


</html>